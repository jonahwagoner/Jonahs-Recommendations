//PRODUCT TEMPLATE//
// const  = {
//     brand: "",
//     name:"",
//     ingredients:"<p></p><p></p><p></p>",
//     image: '/some/path'
// };



//PRODUCTS//

const DERMA_SUN = {
    brand: "Dermalogica",
    name:"Invisible Physical Defense Sunscreen SPF 30",
    ingredients:"<p>Green Tea: Soothes and is loaded with antioxidants to support skin.</p><p>Mushroom Complex (Cordyceps Sinensis and Trametes Versicolor): Calms irritated skin and soothes UV-induced redness and dryness.</p>",
    image: '/some/path'
};

const SNOW_MUSH = {
    brand: "The Inkey List",
    name:"Snow Mushroom Moisturizer",
    ingredients:"<p>0.3% Tremella Fuciformis Extract: provides a cooling effect on the skin.</p><p>2% Amino Acid Based Humectant: helps to hydrate and moisturize skin.</p><p>0.2% Madecassoside with anti-itching: anti-redness properties</p>",
    image: '/some/path'
};

const  LAMER= {
    brand: " La Mer",
    name:"Crème de la Mer Moisturizer",
    ingredients:"<p>Miracle Broth™: Helps create the perfect environment to calm the look of redness and other signs of irritation.</p><p>Lime Tea Concentrate: Contains antioxidants to protect skin from irritation due to environmental stressors.</p><p>Giant Sea Kelp: Support’s skin’s natural healing process.</p>",
    image: '/some/path'
};

const  CAUDALIE_ESSENCE= {
    brand: "Caudalie",
    name:"Vinoperfect Brightening Glycolic Essence",
    ingredients:"<p>Glycolic Acid: Brightens and exfoliates.</p><p>White Peony: Brightens and evens complexion.</p><p>Organic Grape Water: Moisturizes and soothes.</p>",
    image: '/some/path'
};

const  MISSHA= {
    brand: "MISSHA",
    name:"Time Revolution The First Treatment Essence RX",
    ingredients:"<p>Fermented Cicaenzyme: Moisturizes and balances skin.</p><p>Pearl Reef Exrtacts: The pearl reef extracts that are soaked in vinegar exfoliate dead skin calls and make skin texture smooth, bright and dewy.</p><p>Rice Extracts: Nourishing extract full of vitamins make skin smooth and bright.</p>",
    image: '/some/path'
};

const  SK_II= {
    brand: "SK-II",
    name:"Facial Treatment Essence",
    ingredients:"<p>PITERA™: A bio-ingredient derived from yeast fermentation that resembles your skin's Natural Moisturizing Factors; contains over 50 micro-nutrients like vitamins, minerals, amino acids, and organic acids to condition skin's natural functions.</p>",
    image: '/some/path'
};

const  PAULA_RED= {
    brand: "Paula's Choice",
    name:"Anti-Redness Exfoliating Solution",
    ingredients:"<p>Salicylic Acid (BHA) 2%: Penetrates pores to help reduce blemish-causing debris, dead skin, and excess oil.</p><p>Green Tea: A potent antioxidant that visibly soothes irritation and combats redness.</p>",
    image: '/some/path'
};

const  YTTP_CLEANSER= {
    brand: "Youth to the People",
    name:"Superfood Antioxidant Cleanser",
    ingredients:"<p>Kale: This leafy veg is a must-have for more than just your morning juice. It's rich in skin-loving phytonutrients and vitamins C, E and K.</p><p>Spinach: A lightweight skin-soother that boasts a high natural moisture content and cooling properties.</p><p>Green Tea: An anti-inflammatory oil packed with essential fatty acids.</p>",
    image: '/some/path'
};

const  INKEY_FULVIC= {
    brand: "The Inkey List",
    name:"Fulvic Acid Brightening Cleanser",
    ingredients:"<p>0.5% Nordic Beauty Peat: Naturally high in Fulvic Acid, it gently exfoliates for brighter and smoother skin. Fulvic Acid is proven to act as a strong antioxidant with anti-inflammatory properties for a healthy complexion.</p><p>1.5% Kakadu Plum Extract: Rich in Vitamin C, containing 50x more than an orange, it helps to instantly boost skin’s radiance and luminosity.</p><p>1% Liquorice Root Extract: A potent antioxidant with soothing benefits, it helps to reduce hyperpigmentation and brightens overall skin tone.</p>",
    image: '/some/path'
};

const  MURAD_CLEANSER= {
    brand: "Murad",
    name:"AHA/BHA Exfoliating Cleanser",
    ingredients:"<p>Salicylic, Lactic, and Glycolic Acids: Provide gentle exfoliation, help reveal softer, smoother skin, and support natural cell turnover.</p><p>Jojoba Beads: Help remove dull, dry skin.</p><p>Sodium PCA: Helps keep skin hydrated.</p>",
    image: '/some/path'
};

const RENEWING_CLEANSER = {
    brand: "CeraVe",
    name:"Renewing SA Cleanser",
    ingredients:"<p>Ceramides: Help restore and maintain the skin's natural barrier.</p><p>Hyaluronic Acid: Helps retain the skin's natural moisture.</p><p>Niacinamide: Helps calm skin.</p>",
    image: '/some/path'
};

const FOAMING_WASH = {
    brand: "CeraVe",
    name:"Foaming Face Wash",
    ingredients:"<p>Ceramides: Helps restore and maintain the skin’s natural barrier.</p><p>Hyaluronic Acid: Helps retain skin’s natural moisture.</p><p>Niacinamide: Helps calm the skin.</p>",
    image: '/some/path'
};

const HYDRATING_CLEANSER = {
    brand: 'CeraVe',
    name:'Hydrating Facial Cleanser',
    ingredients:"<p>This patented delivery system continually releases moisturizing ingredients for all day hydration.</p><p>Ceramides: Helps restore and maintain the skin's natural barrier.</p><p>Hyaluronic Acid: Helps retain the skin's natural moisture.</p>",
    image: '/some/path'
};

const GRAPEWATER_SPRAY = {
    brand: "Caudalie",
    name:"Grapewater Spray",
    ingredients:"<p>Organic Grape Water: Moisturizes and soothes skin.</p><p>Grape Juice: Deeply nourishes your skin and rich in polysaccharides</p>",
    image: '/some/path'
};

const ORDINARY_HYALURONIC = {
    brand: "The Ordinary",
    name:"Hyaluronic Acid 2% + B%",
    ingredients:"<p>Vitamin B5: Hydrates</p><p>Next-generation Hyaluronic Acid Crosspolymer: A cross-linked form of hyaluronic acid that enhances the delivery of HA actives and helps to support water density.</p>",
    image: '/some/path'
};

const CERAVE_CREAM= {
    brand: "CeraVe",
    name:"Moisture Cream",
    ingredients:"<p>MVE Technology: This patented delivery system continually releases moisturizing ingredients for 24-hour hydration.</p><p>Ceramides: Helps restore and maintain the skin's natural barrier.</p><p>Hyaluronic Acid: Helps retain skin's natural moisture.</p>",
    image: '/some/path'
};

const INNISFREE= {
    brand: "Innisfree",
    name:"Daily UV Defense Sunscreen SPF 36",
    ingredients:"<p>Green Tea: Nurtures skin with soothing hydration.</p><p>Cica: Soothes skin and reduces visible signs of irritation.</p><p>Sunflower Seed Oil: Delivers lightweight moisture to skin.</p>",
    image: '/some/path'
};

const SWEET_BIOME = {
    brand: "Drunk Elephant",
    name:"Sweet Biome Fermented Sake Hydrating Spray",
    ingredients:"<p>Galactomyces Ferment Filtrate (Fermented Sake): Defends against free-radical damage and supports a strong skin barrier.</p><p>Sodium PCA: An electrolyte with antioxidant benefits that maintains skin hydration levels.</p><p>Saccharomyces/Xylinum/Black Tea Ferment (Kombucha): A powerful barrier restorative with antioxidant benefits.</p>",
    image: '/some/path'
};

const PROTINI= {
    brand: "Drunk Elephant",
    name:"Protini Polypeptide Moisturizer",
    ingredients:"<p>Soybean Folic Acid Ferment Extract: This B vitamin plays a central role in maintaining youthful-, elastic-looking skin. Skin is thirsty for folic acid, especially after exposure to sun.</p><p>Pygmy Waterlily Stem Cell Extract: An excellent source of antioxidants and nutrients to replenish the skin; extremely moisturizing, soothing, and calming; and effective in supporting healthy-, youthful-looking skin.</p><p>Soybean Folic Acid Ferment Extract: This B vitamin plays a central role in maintaining youthful-, elastic-looking skin. Skin is thirsty for folic acid, especially after exposure to sun.</p>",
    image: '/some/path'
};

const  SHISEIDO= {
    brand: "Shiseido",
    name:"Ultimate Sun Protector Lotion SPF 50+ Sunscreen",
    ingredients:"<p>HeatForce Technology: A heat-sensing essence in the cream that becomes activated by external heat, forming a stronger barrier.</p><p>WetForce Technology: Negative ions in the formula combine with positive ions in perspiration and water to create an additional layer of invisible sun protection.</p>",
    image: '/some/path'
};

const DEEP_SWEEP = {
    brand: 'Farmacy',
    name:'Deep Sweep',
    ingredients:'<p>BHA (2% Salicylic Acid): Exfoliates, deep cleans pores, draws out excess oil and refines skin texture.</p><p>Moringa Seed Extract + Moringa Water: Purify and refresh skin by removing impurities caused by pollution.</p><p>Papaya Enzyme: Gently exfoliates and clarifies to reveal a fresh-looking complexion.</p><p>Chlorella: Rich source of antioxidants; helps nourish and soothe skin.</p>',
    image: '/some/path'
};

const CICAPAIR_COLOR_CORRECTOR = {
    brand: 'Dr. Jart+',
    name: 'Cicapair™ Tiger Grass Color Correcting Treatment SPF 30',
    ingredients: "<p>Centella Asiatica Complex: Protects from environmental stressors causing sensitized skin.</p><p>Herbs Complex: Supports skin for a vibrant appearance.</p><p>Minerals Solution and Panthenol: Supports skin's moisture barrier.</p>",
    image: '/some/path'
};



const RECOMMENDATIONS_MAP = {
    "1111": [
        HYDRATING_CLEANSER,
        GRAPEWATER_SPRAY,
        ORDINARY_HYALURONIC,
        CERAVE_CREAM,
        INNISFREE
    ],
    "1112": [
        HYDRATING_CLEANSER,
        SWEET_BIOME,
        ORDINARY_HYALURONIC,
        PROTINI,
        SHISEIDO
    ]
}


function addButtonListeners() {
    const startBtn = document.getElementById("start-button");
    startBtn.addEventListener("click", startQuiz);
    const nextBtn = document.getElementById("next-button");
    nextBtn.addEventListener("click", nextQuestion);
    const getQuizResults = document.getElementById("get-results");
    getQuizResults.addEventListener("click", getResults);
}

window.onload = addButtonListeners;


function startQuiz(event) {
    event.preventDefault();
    const startButton = event.target;
    startButton.classList.add("d-none");
    const firstQuestion = document.getElementById("question1");
    firstQuestion.classList.remove("d-none");
    const nextButton = document.getElementById("next-button");
    nextButton.classList.remove("d-none");
    window.localStorage.setItem("currentQuestion", "1");
}

function nextQuestion(event) {
    event.preventDefault();
    const currentQuestion = parseInt(window.localStorage.getItem("currentQuestion"));
    const questionId = "question" + currentQuestion;
    const firstQuestion = document.getElementById(questionId);

    const qInput = document.querySelector("#" + questionId + " input");
    console.log('valid ', qInput.checkValidity())
    if(qInput.checkValidity() == false){
        return;
    }
    const answer = document.querySelector("#" + questionId + " input:checked").value;
    console.log('ans ', answer);
    window.localStorage.setItem(questionId, answer);


    const theNextQuestion = currentQuestion + 1;
    const nextBtn = event.target;
    nextBtn.blur();
    firstQuestion.classList.add("d-none");
    const secondQuestion = document.getElementById("question" + theNextQuestion);
    secondQuestion.classList.remove("d-none");
    window.localStorage.setItem("currentQuestion", theNextQuestion.toString());
    if(theNextQuestion == 4){
        nextBtn.classList.add("d-none");
        const getTheResults = document.getElementById("get-results");
        getTheResults.classList.remove("d-none");
    }

}

function getResults(event) {
    event.preventDefault();
    const currentQuestion = parseInt(window.localStorage.getItem("currentQuestion"));
    const questionId = "question" + currentQuestion;

    const qInput = document.querySelector("#" + questionId + " input");
    console.log('valid ', qInput.checkValidity())
    if(qInput.checkValidity() == false){
        return;
    }
    let answerString = "";
    for(let i = 1; i < currentQuestion; i++){
        const answer = localStorage.getItem("question" + i);
        answerString += (answer);
    }
    const currentAnswer = document.querySelector("#" + questionId + " input:checked").value;
    answerString += currentAnswer;

    console.log('ans string', answerString);

    const listItems = document.querySelectorAll("#quiz-rec-list li");
    // console.log('items', listItems)
    const products = RECOMMENDATIONS_MAP[answerString];

    console.log('produs ', products)

    for (let i = 0; i < listItems.length; i++) {
        const productBrand = listItems[i].children[0].children[0];
        const productName = listItems[i].children[0].children[1];
        const productDescription = listItems[i].children[1];
        productBrand.innerHTML = products[i].brand;
        productName.innerHTML = products[i].name;
        productDescription.innerHTML = products[i].ingredients
    }

    const buttonSpinner = document.getElementById("btn-spinner");
    buttonSpinner.classList.remove("d-none");
    const theGetResultsBtn = document.getElementById("get-results");

    theGetResultsBtn.disabled = true;

    setTimeout(() => {
        const quizHeader = document.getElementById("quiz-head");
        quizHeader.innerHTML = 'Your Personalized Regimen';


        const theForm = document.getElementById("quiz-form");
        theForm.classList.add("d-none");

        const theRecommendations = document.getElementById("quiz-rec-list");
        theRecommendations.classList.remove("d-none");

        localStorage.clear();

    }, 1600);



}